<!DOCTYPE HTML>

<html>
    <head>
        
            
                <title>Obtaining never-expiring access_token to post on Facebook page</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.15" />
        


        
            <meta name="author" content="Sergey Nuzhdin">
        
        
            
                <meta name="description" content="Blog about python, docker, kubernetes and other stuff..,">
            
        

        

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:title" content="Obtaining never-expiring access_token to post on Facebook page"/>
<meta name="twitter:description" content="For one of my projects I needed to post messages to Facebook Fan Page.
After initial search I found out that Facebook has never-expiring token specially for this.
It looks like trivial task and I was really surprised when I didn&rsquo;t find any one-page step-by-step manual to get it.
I decided to write all steps from the beginning, not only part about gettting never-expiring token.
"/>



        <meta property="og:title" content="Obtaining never-expiring access_token to post on Facebook page" />
<meta property="og:description" content="For one of my projects I needed to post messages to Facebook Fan Page.
After initial search I found out that Facebook has never-expiring token specially for this.
It looks like trivial task and I was really surprised when I didn&rsquo;t find any one-page step-by-step manual to get it.
I decided to write all steps from the beginning, not only part about gettting never-expiring token.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.lwolf.org/post/2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page/" />


<meta property="og:updated_time" content="2014-06-16T00:00:00&#43;00:00"/>










        
<meta itemprop="name" content="Obtaining never-expiring access_token to post on Facebook page">
<meta itemprop="description" content="For one of my projects I needed to post messages to Facebook Fan Page.
After initial search I found out that Facebook has never-expiring token specially for this.
It looks like trivial task and I was really surprised when I didn&rsquo;t find any one-page step-by-step manual to get it.
I decided to write all steps from the beginning, not only part about gettting never-expiring token.
">


<meta itemprop="dateModified" content="2014-06-16T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="464">



<meta itemprop="keywords" content="Python,coding,docker,infrastructure,mac,nginx,sql," />

        

        

        
        
            
        

        
        
            <link rel="stylesheet" href="/css/google-font.css" />
            <link rel="stylesheet" href="/css/font-awesome.min.css" />
            <link rel="stylesheet" href="/css/main.css" />
            <link rel="stylesheet" href="/css/add-on.css" />
            <link rel="stylesheet" href="/css/monokai-sublime.css">
        

        

        
        
        
            
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-47060494-2', 'auto');
ga('send', 'pageview');
</script>

        
    </head>
    <body>

        
        <div id="wrapper">

    
    
<header id="header">
    
        <h2><a href="/">lwolfs blog</i></a></h2>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/post/">
                        
                            <i class="fa fa-newspaper-o">&nbsp;</i>Posts
                    </a>
                </li>
            
                <li>
                    <a href="/categories/">
                        Categories
                    </a>
                </li>
            
                <li>
                    <a href="/about/">
                        About
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:http://blog.lwolf.org">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:http://blog.lwolf.org">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/post/">
                            <h3>
                                
                                    <i class="fa fa-newspaper-o">&nbsp;</i>
                                
                                Posts
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories/">
                            <h3>
                                
                                Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about/">
                            <h3>
                                
                                About
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    <li>
                        <a href="http://blog.lwolf.org/post/hosting-own-docker-hub/"><p>Hosting own docker hub with UI and tls</p></a>
                    </li>
                
                    <li>
                        <a href="http://blog.lwolf.org/post/configuring-slate-tile-manager-for-mac/"><p>Configuring slate tile manager for mac</p></a>
                    </li>
                
                    <li>
                        <a href="http://blog.lwolf.org/post/2014-06-27-vk-api-magic/"><p>VK API magic</p></a>
                    </li>
                
                    <li>
                        <a href="http://blog.lwolf.org/post/2014-06-17-getting-epoch-date-for-highcharts-from-sqlalchemy/"><p>Getting epoch date for highcharts from sqlalchemy</p></a>
                    </li>
                
                    <li>
                        <a href="http://blog.lwolf.org/post/2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page/"><p>Obtaining never-expiring access_token to post on Facebook page</p></a>
                    </li>
                
            </ul>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            


<li><a href="//twitter.com/share?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&text=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page&via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//plus.google.com/share?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&title=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&title=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&title=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by Sergey%20Nuzhdin&body=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
    <header>
    <div class="title">
        
            <h1><a href="http://blog.lwolf.org/post/2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page/">Obtaining never-expiring access_token to post on Facebook page</a></h1>
            
        
        
    </div>
    <div class="meta">
        
            
        

        <time class="published"
            datetime='2014-06-16'>
            June 16, 2014</time>
        <span class="author">Sergey Nuzhdin</span>
        
            <p>3 minute read</p>
        
        
    </div>
</header>


    <section id="social-share">
        <ul class="icons">
            


<li><a href="//twitter.com/share?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&text=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page&via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//plus.google.com/share?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&title=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&title=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f&title=Obtaining%20never-expiring%20access_token%20to%20post%20on%20Facebook%20page" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by Sergey%20Nuzhdin&body=http%3a%2f%2fblog.lwolf.org%2fpost%2f2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
    

    

<p>For one of my projects I needed to post messages to Facebook Fan Page.
After initial search I found out that Facebook has never-expiring token specially for this.
It looks like trivial task and I was really surprised when I didn&rsquo;t find any one-page step-by-step manual to get it.
I decided to write all steps from the beginning, not only part about gettting never-expiring token.</p>

<h2 id="proper-permissions:be2fe9f8090e318a51404bb9d1cbedaf">Proper permissions</h2>

<p>It&rsquo;s obvious that to post on Page you need special set of permissions - _publish<em>actions</em>, _manage<em>pages</em>.</br>
You do not need to set these permissions to the whole application in settings, because you need it only for your user (user from whom messages will be posted).
Facebook provides tool for generating access_tokens:</p>

<pre><code>https://developers.facebook.com/tools/explorer/
</code></pre>

<p>Here you should select your application and click <code>Get Access Token</code>. In popup select at least permissions mentioned above and click <code>Get Access Token</code>.
Now you have access_token able to post to Page. But it is valid only for 60 minutes. Not good.</p>

<h2 id="long-lived-access-token:be2fe9f8090e318a51404bb9d1cbedaf">Long-lived access_token</h2>

<p>Getting long-lived access_token is the easiest part. You just need to send your current active <code>short-term access_token</code>, <code>client_id</code> and <code>client_secret</code> to the url:</p>

<pre><code>https://graph.facebook.com/oauth/access_token?
    client_id=my_app_id&amp;
    client_secret=my_app_secret&amp;
    grant_type=fb_exchange_token&amp;
    fb_exchange_token=access_token
</code></pre>

<p>Where <code>client_id</code> and <code>client_secret</code> are in your application settings.</p>

<p>And you will get response with new access_token and its expiration date in number of seconds.
Now you have good access_token valid for 60 days which you can use everywhere. but you need to extend it from time to time.</p>

<h2 id="eternal-token:be2fe9f8090e318a51404bb9d1cbedaf">Eternal token</h2>

<p>To get never-expiring token you need to use your long-live token.
All you need is to enter it on:
    <a href="https://developers.facebook.com/tools/explorer">https://developers.facebook.com/tools/explorer</a></p>

<p>And send request to <code>/v2.0/me/accounts</code>. You should see JSON with all your pages and some basic information about it: ID, Category, Name etc. And among them you will see <code>access_token</code> for each page. This access_tokens are what we are searching for. They are never-ending.</p>


<figure >
    
        <img src="/img/2014/06/token.png" />
    
    
    <figcaption>
        <h4>Access_token</h4>
        
    </figcaption>
    
</figure>


<h2 id="get-info-about-token:be2fe9f8090e318a51404bb9d1cbedaf">Get info about token</h2>

<p>Facebook has another helpful endpoint to get information about any token, e.g. Expiration-date, app_id, user_id and scopes associated with it.</p>

<pre><code>https://developers.facebook.com/tools/debug/accesstoken
</code></pre>

<p>If you submit our final token here you will see <code>Expires:Never</code> in response.</p>

<h2 id="python-way:be2fe9f8090e318a51404bb9d1cbedaf">Python way</h2>

<p>Here is few lines to show how to get it with Python.</p>

<pre><code># Facebook SDK
import facebook

# Init graphAPI with short-lived token
graph = facebook.GraphAPI(short_token)

# Exchange short-lived-token to long-lived
long_token = graph.extend_access_token(client_id, client_secret)

# Init graphAPI with long-lived token
graph = facebook.GraphAPI(long_token['access_token'])

# Request all pages for user
pages = graph.get_object('me/accounts')

for page in pages['data']:
    print page
</code></pre>

<p>For each page you will see JSON like this.</p>

<pre><code class="language-json">{
   'access_token': never-expiring-page-token,
   'category': 'Product/service',
   'id': PAGE_ID,
   'name': PAGE_NAME,
   'perms': [
       'ADMINISTER', 
       'EDIT_PROFILE',
       'CREATE_CONTENT',
       'MODERATE_CONTENT',
       'CREATE_ADS',
       'BASIC_ADMIN'
    ]
}
</code></pre>

<p>Now, when I know how to do it, I see that most, if not all, of this could be found on facebook documentation pages.
But, let it be here.</p>


    <footer>
        <ul class="stats">
    

    
        
            <li>
                
        

                
                    Categories
                
            </li>
    

    
        <li><a href="/categories/python">Python</a></li>
    
        <li><a href="/categories/coding">coding</a></li>
    
</ul>

    </footer>
</article>
<ul class="actions pagination">
    

    
        <li><a href="http://blog.lwolf.org/post/2014-06-17-getting-epoch-date-for-highcharts-from-sqlalchemy/"
                class="button big next">Getting epoch date for highcharts from sqlalchemy</a></li>
    
</ul>



    
        <article class="post">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'blog-lwolf';
    var disqus_identifier = 'http:\/\/blog.lwolf.org\/post\/2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page\/';
    var disqus_title = 'Obtaining never-expiring access_token to post on Facebook page';
    var disqus_url = 'http:\/\/blog.lwolf.org\/post\/2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>
    


    </div>
    
<section id="sidebar">

    
        <section id="intro">
            
            
                
                    <a href="/" class="logo"><img src="/img/author.jpg" alt="Hugo Future Imperfect" /></a>
                
            
            
                <header>
                    <h2>LWOLFS BLOG</h2>
                    <p>Another blog about dev and devops stuff, mostly about python, docker, kubernetes, etc</p>
                </header>
            
            <ul class="icons">
                
                
                    
<li><a href="//github.com/lwolf" target="_blank" title="GitHub" class="fa fa-github"></a></li>



































<li><a href="//linkedin.com/in/sergey-nuzhdin-9925b31a" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>













<li><a href="//facebook.com/snuzhdin" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>





<li><a href="mailto:ipaq.lw@gmail.com" title="Email" class="fa fa-envelope"></a></li>


                
            </ul>
        </section>

    
        <section id="recent-posts">
            <ul class="posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <h3><a href="http://blog.lwolf.org/post/hosting-own-docker-hub/">Hosting own docker hub with UI and tls</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2016-05-03'>
                                    May 3, 2016</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="http://blog.lwolf.org/post/configuring-slate-tile-manager-for-mac/">Configuring slate tile manager for mac</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2016-04-19'>
                                    April 19, 2016</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="http://blog.lwolf.org/post/2014-06-27-vk-api-magic/">VK API magic</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2014-06-27'>
                                    June 27, 2014</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="http://blog.lwolf.org/post/2014-06-17-getting-epoch-date-for-highcharts-from-sqlalchemy/">Getting epoch date for highcharts from sqlalchemy</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2014-06-17'>
                                    June 17, 2014</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="http://blog.lwolf.org/post/2014-06-16-obtaining-never-expiring-access-token-to-post-on-facebook-page/">Obtaining never-expiring access_token to post on Facebook page</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2014-06-16'>
                                    June 16, 2014</time>
                            </header>
                        </article>
                    </li>
                

                
                    <li>
                        <ul class="actions">
                            <li><a href=
                            
                                /post/
                            
                            class="button">View more posts</a></li>
                        </ul>
                    </li>
                
            </ul>
        </section>

    
    
    
    
        <section id="categories">
            <ul class="posts">
                <header>
                    <h3><a href="/categories/">Categories</a></h3>
                </header>

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/coding/">coding</a>
                                <span style="float:right;">3</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/sql/">sql</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/python/">Python</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/nginx/">nginx</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/docker/">docker</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/infrastructure/">infrastructure</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/mac/">mac</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
            </ul>
        </section>
    

    
        
        <section class="blurb">
            <h2>About</h2>
            <p>Some about me text...</p>

            <ul class="actions">
                <li><a href="/about/" class="button">Learn More</a></li>
            </ul>
        </section>
        

    
        <section id="footer">
            <ul class="icons">
                
                
                    
<li><a href="//github.com/lwolf" target="_blank" title="GitHub" class="fa fa-github"></a></li>



































<li><a href="//linkedin.com/in/sergey-nuzhdin-9925b31a" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>













<li><a href="//facebook.com/snuzhdin" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>





<li><a href="mailto:ipaq.lw@gmail.com" title="Email" class="fa fa-envelope"></a></li>


                
            </ul>

            <p class="copyright">&copy; lwolfs blog. Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a>. Ported by <a href="//github.com/jpescador" target="_blank">Julio Pescador</a>. Powered by <a href="//gohugo.io" target="_blank">Hugo</a></p>
        </section>

</section>

            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
            <script src="/js/jquery.min.js"></script>
            <script src="/js/skel.min.js"></script>
            <script src="/js/util.js"></script>
            <script src="/js/main.js"></script>
            <script src="/js/backToTop.js"></script>
            <script src="/js/highlight.pack.js"></script>
        

        

            
            <script>hljs.initHighlightingOnLoad();</script>
            
    </body>
</html>

